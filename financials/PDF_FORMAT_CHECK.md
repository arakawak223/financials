# PDFフォーマット確認手順

PDFからデータが抽出できない場合、以下を確認してください。

## 1. PDFがテキストベースかスキャンか確認

ブラウザの開発者ツール（F12）→ Consoleタブで以下を確認：

```
PDFを処理中... (1/1): BP決算書_R4.7期_Part1.pdf
データを抽出中... (1/1): BP決算書_R4.7期_Part1.pdf
```

この後、以下のようなメッセージが出ているか確認：

- **テキストベースPDF**: 「テキスト抽出成功」
- **スキャンPDF**: 「OCR処理中...」

## 2. 抽出されたテキストを確認

Consoleに `extractedData` の内容が表示されているはずです。

以下の情報があれば、正規表現パターンを調整できます：

### 必要な情報

1. **PDFのサンプルテキスト**（可能であれば）
   - 「現金及び預金」の行
   - 「売上高」の行
   - 「営業利益」の行

2. **PDFのフォーマット情報**
   - 会計ソフト名（例: 弥生会計、freee、マネーフォワードなど）
   - 出力形式（決算書、勘定科目内訳書など）

## 3. PDFから直接テキストをコピーして確認

PDFファイルを開いて、以下をコピー＆ペーストしてみてください：

### 貸借対照表（BS）の例

```
資産の部
  流動資産
    現金及び預金              10,000,000
    売掛金                     5,000,000
    棚卸資産                   3,000,000
    流動資産合計              18,000,000
```

### 損益計算書（PL）の例

```
売上高                        50,000,000
売上原価                      30,000,000
売上総利益                    20,000,000
販売費及び一般管理費          15,000,000
営業利益                       5,000,000
```

## 4. 現在の正規表現パターンの制限

現在の `pdf-processor.ts` は以下のフォーマットのみ対応：

```
現金預金: 10,000,000
現金及び預金：10,000,000
売上高: 50,000,000
```

### 対応していないフォーマット例

- タブ区切り: `現金預金    10,000,000`
- スペース区切り: `現金預金 10,000,000`
- 改行区切り:
  ```
  現金預金
  10,000,000
  ```

## 5. 暫定的な解決策

PDFフォーマットが複雑な場合、以下の方法をお勧めします：

### オプションA: 手動入力
- 最も確実
- 分析詳細ページの「編集」ボタンから入力

### オプションB: CSVインポート機能を使用
- Excelで財務データを整理
- CSVで保存
- インポート機能で一括登録

### オプションC: AIによる抽出（将来的に実装可能）
- OpenAI GPT-4 Vision API
- Google Cloud Vision API
- より柔軟なフォーマットに対応可能

## 6. パターンのカスタマイズ依頼

以下の情報を提供いただければ、PDFフォーマットに合わせてパターンを調整します：

1. PDFのスクリーンショット（機密情報は隠してOK）
2. または、PDFから数行コピーしたテキスト
3. 使用している会計ソフト名

この情報があれば、正規表現パターンを最適化できます！
